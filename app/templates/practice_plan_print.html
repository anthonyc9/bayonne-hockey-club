<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ practice_plan.title }} - Print View</title>
    
    <!-- Prevent caching for print template -->
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Bootstrap CSS for basic styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

<style>
/* Reset all styles to ensure clean print layout */
* {
    box-sizing: border-box;
}

body { 
    margin: 0 !important;
    padding: 0 !important;
    font-family: Arial, sans-serif !important;
    background: white !important;
    color: black !important;
}

@media print {
    body { 
        margin: 0 !important; 
        padding: 0.5in !important;
        font-size: 10pt !important;
        line-height: 1.3 !important;
        background: white !important;
        color: black !important;
    }
    .no-print { display: none !important; }
    .page-break { page-break-before: always; }
    .card { border: 1px solid #000 !important; box-shadow: none !important; }
    
    /* Ensure print styles override everything */
    .print-container { max-width: 8.5in !important; }
    .print-card { border: 1px solid #000 !important; }
    .activity-notes { border: 1px solid #000 !important; }
}

.print-container {
    max-width: 8.5in;
    margin: 0 auto;
}

.print-header {
    text-align: center;
    border-bottom: 2px solid #000;
    padding-bottom: 15px;
    margin-bottom: 20px;
}

.print-title {
    font-size: 16pt;
    font-weight: bold;
    text-transform: uppercase;
    margin: 0 0 8px 0;
    letter-spacing: 1px;
}

.print-details {
    font-size: 11pt;
    margin: 5px 0;
}

.print-details .badge {
    background: #dc3545 !important;
    color: white !important;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 9pt;
    font-weight: bold;
}

.print-objectives {
    background: #f8f9fa;
    border: 1px solid #000;
    padding: 12px;
    margin: 15px 0;
    font-size: 9pt;
}

.print-objectives h4 {
    margin: 0 0 8px 0;
    text-transform: uppercase;
    font-weight: bold;
    font-size: 10pt;
}

.print-objectives ol {
    margin: 0;
    padding-left: 20px;
}

.print-objectives li {
    margin-bottom: 3px;
}

.main-content {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

.left-column {
    flex: 2;
}

.right-column {
    flex: 1;
}

.print-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    margin-bottom: 20px;
    background: white;
    overflow: hidden;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.print-card-header {
    background: #f8f9fa;
    border-bottom: 1px solid #ddd;
    padding: 10px 15px;
    font-weight: bold;
    font-size: 10pt;
    text-transform: uppercase;
    color: #333;
}

.print-card-body {
    padding: 15px;
}

.focus-badges {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    flex-wrap: wrap;
}

.focus-badge {
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 9pt;
    font-weight: bold;
    color: white;
}

.focus-badge.primary {
    background: #007bff;
}

.focus-badge.secondary {
    background: #6c757d;
}

.focus-badge.success {
    background: #28a745;
}

.focus-badge.warning {
    background: #ffc107;
    color: #000;
}

.activity-section {
    margin: 20px 0;
}

.activity-header {
    background: #000;
    color: white;
    padding: 8px 12px;
    margin-bottom: 15px;
    font-weight: bold;
    text-transform: uppercase;
    font-size: 10pt;
    border-radius: 4px;
}

.activity-content {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
}

.activity-text {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background: #f8f9fa;
}

.activity-notes {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background: #f9f9f9;
    position: relative;
    min-height: 80px;
}

.activity-notes::before {
    content: 'Notes & Drawings';
    position: absolute;
    top: 5px;
    left: 10px;
    font-size: 8pt;
    color: #666;
    font-style: italic;
    font-weight: bold;
}

.activity-text h5 {
    margin: 0 0 8px 0;
    font-size: 9pt;
    font-weight: bold;
    text-transform: uppercase;
    color: #333;
}

.activity-text p {
    margin: 0;
    font-size: 9pt;
    line-height: 1.3;
}

.equipment-section {
    margin: 20px 0;
}

.equipment-content {
    display: flex;
    gap: 20px;
}

.equipment-item {
    flex: 1;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    background: #f8f9fa;
}

.equipment-item h5 {
    margin: 0 0 8px 0;
    font-size: 9pt;
    font-weight: bold;
    text-transform: uppercase;
    color: #333;
}

.equipment-item p {
    margin: 0;
    font-size: 9pt;
    line-height: 1.3;
}

.attachments-section {
    margin: 20px 0;
}

.attachments-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.attachments-list li {
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 8px;
    background: white;
    font-size: 9pt;
}

.attachments-list li:before {
    content: "ðŸ“Ž ";
    margin-right: 8px;
}

.external-links-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.external-links-list li {
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 8px;
    background: white;
    font-size: 9pt;
}

.external-links-list li:before {
    content: "ðŸ”— ";
    margin-right: 8px;
}

.print-footer {
    margin-top: 30px;
    text-align: center;
    font-size: 8pt;
    color: #666;
    border-top: 1px solid #ddd;
    padding-top: 10px;
}

@media (max-width: 768px) {
    .main-content {
        flex-direction: column;
    }
    .activity-content {
        flex-direction: column;
    }
    .equipment-content {
        flex-direction: column;
    }
}
</style>
</head>
<body>
<div class="container-fluid no-print">
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <h1>Print View: {{ practice_plan.title }}</h1>
                <div>
                    <button onclick="window.print()" class="btn btn-primary">
                        <i class="bi bi-printer"></i> Print Practice Plan
                    </button>
                    <a href="{{ url_for('main.view_practice_plan', plan_id=practice_plan.id) }}" class="btn btn-secondary">
                        <i class="bi bi-arrow-left"></i> Back to Plan
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Print Content -->
<div class="print-container">
    <!-- Header -->
    <div class="print-header">
        <h1 class="print-title">{{ practice_plan.title }}</h1>
        <div class="print-details">
            <i class="bi bi-calendar"></i> {{ practice_plan.date.strftime('%A, %B %d, %Y') }}
            {% if practice_plan.duration %}
                â€¢ <i class="bi bi-clock"></i> {{ practice_plan.duration }} MIN
            {% endif %}
            â€¢ <span class="badge">{{ practice_plan.team.name }}</span>
        </div>
        
        <div class="print-objectives">
            <h4>Session Objectives:</h4>
            <ol>
                {% if practice_plan.primary_focus %}
                <li>{{ practice_plan.primary_focus }}</li>
                {% endif %}
                {% if practice_plan.secondary_focus and practice_plan.secondary_focus != 'N/A' %}
                <li>{{ practice_plan.secondary_focus }}</li>
                {% endif %}
                {% if practice_plan.warm_up %}
                <li>Warm-up and preparation</li>
                {% endif %}
                {% if practice_plan.main_content %}
                <li>Skill development and practice</li>
                {% endif %}
                {% if practice_plan.cool_down %}
                <li>Cool-down and review</li>
                {% endif %}
            </ol>
        </div>
    </div>

    <div class="main-content">
        <!-- Left Column - Main Content -->
        <div class="left-column">
            <!-- Practice Plan Details -->
            <div class="print-card">
                <div class="print-card-header">
                    <i class="bi bi-info-circle"></i> Practice Plan Details
                </div>
                <div class="print-card-body">
                    <div class="focus-badges">
                        {% if practice_plan.primary_focus %}
                        <span class="focus-badge primary">{{ practice_plan.primary_focus }}</span>
                        {% endif %}
                        {% if practice_plan.secondary_focus and practice_plan.secondary_focus != 'N/A' %}
                        <span class="focus-badge secondary">{{ practice_plan.secondary_focus }}</span>
                        {% endif %}
                        {% if practice_plan.review_status %}
                        <span class="focus-badge {% if practice_plan.review_status == 'Reviewed' %}success{% else %}warning{% endif %}">
                            {{ practice_plan.review_status }}
                        </span>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Warm Up Section -->
            {% if practice_plan.warm_up %}
            <div class="activity-section">
                <div class="activity-header">
                    Warm Up ({{ practice_plan.duration|int // 6 if practice_plan.duration else 10 }} MIN)
                </div>
                <div class="activity-content">
                    <div class="activity-text">
                        <h5>Warm-up Activities:</h5>
                        <p>{{ practice_plan.warm_up }}</p>
                    </div>
                    <div class="activity-notes">
                        <!-- Blank space for coaches' notes and drawings -->
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Main Content Section -->
            {% if practice_plan.main_content %}
            <div class="activity-section">
                <div class="activity-header">
                    Skill Stations ({{ practice_plan.duration|int // 3 if practice_plan.duration else 20 }} MIN)
                </div>
                <div class="activity-content">
                    <div class="activity-text">
                        <h5>Main Practice Activities:</h5>
                        <p>{{ practice_plan.main_content }}</p>
                    </div>
                    <div class="activity-notes">
                        <!-- Blank space for coaches' notes and drawings -->
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Cool Down Section -->
            {% if practice_plan.cool_down %}
            <div class="activity-section">
                <div class="activity-header">
                    Cool Down ({{ practice_plan.duration|int // 6 if practice_plan.duration else 10 }} MIN)
                </div>
                <div class="activity-content">
                    <div class="activity-text">
                        <h5>Cool-down Activities:</h5>
                        <p>{{ practice_plan.cool_down }}</p>
                    </div>
                    <div class="activity-notes">
                        <!-- Blank space for coaches' notes and drawings -->
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Additional Information -->
            {% if practice_plan.equipment_needed or practice_plan.additional_notes %}
            <div class="print-card">
                <div class="print-card-header">
                    <i class="bi bi-gear"></i> Additional Information
                </div>
                <div class="print-card-body">
                    <div class="equipment-content">
                        {% if practice_plan.equipment_needed %}
                        <div class="equipment-item">
                            <h5>Equipment Needed</h5>
                            <p>{{ practice_plan.equipment_needed }}</p>
                        </div>
                        {% endif %}
                        
                        {% if practice_plan.additional_notes %}
                        <div class="equipment-item">
                            <h5>Additional Notes</h5>
                            <p>{{ practice_plan.additional_notes }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Right Column - Sidebar Info -->
        <div class="right-column">
            <!-- Attachments -->
            <div class="print-card">
                <div class="print-card-header">
                    <i class="bi bi-paperclip"></i> Attachments
                </div>
                <div class="print-card-body">
                    {% if practice_plan.attachments %}
                        <ul class="attachments-list">
                            {% for attachment in practice_plan.attachments %}
                            <li>{{ attachment.original_name }}</li>
                            {% endfor %}
                        </ul>
                    {% else %}
                        <p style="font-size: 9pt; color: #666; margin: 0;">No attachments</p>
                    {% endif %}
                </div>
            </div>

            <!-- External Links -->
            {% if practice_plan.external_links %}
            <div class="print-card">
                <div class="print-card-header">
                    <i class="bi bi-link-45deg"></i> External Links
                </div>
                <div class="print-card-body">
                    <ul class="external-links-list">
                        {% for link in practice_plan.external_links.split(',') %}
                        <li>{{ link.strip() }}</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
            {% endif %}

            <!-- Quick Reference -->
            <div class="print-card">
                <div class="print-card-header">
                    <i class="bi bi-lightning"></i> Quick Reference
                </div>
                <div class="print-card-body">
                    <p style="font-size: 9pt; margin: 0 0 8px 0;"><strong>Team:</strong> {{ practice_plan.team.name }}</p>
                    <p style="font-size: 9pt; margin: 0 0 8px 0;"><strong>Date:</strong> {{ practice_plan.date.strftime('%m/%d/%Y') }}</p>
                    <p style="font-size: 9pt; margin: 0;"><strong>Duration:</strong> {{ practice_plan.duration or '60' }} min</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="print-footer">
        <p>Generated by Bayonne Hockey Club Coaches Portal</p>
        <p>{{ practice_plan.date.strftime('%B %d, %Y') }} | {{ practice_plan.team.name }}</p>
    </div>
</div>

</body>
</html>
